parameters:
  - name: storageaccount
    type: string

  - name: containername
    type: string

  - name: statefilename
    type: string

  - name: workingdir
    type: string

  - name: svcname
    type: string

    
stages:
  - stage: stage2
    displayName: terraform init
    jobs:
      - job: terraformInit
        displayName: terraform init
        steps:
        - task: TerraformTask@5
          inputs:
            provider: 'azurerm'
            command: 'init'
            workingDirectory: ${{ parameters.workingdir }}
            backendServiceArm: ${{ parameters.svcname }}
            backendAzureRmStorageAccountName: ${{ parameters.storageaccount }}
            backendAzureRmContainerName: ${{ parameters.containername }}
            backendAzureRmKey: ${{ parameters.statefilename }}
